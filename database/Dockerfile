FROM mongo:4.0

ARG INITDB_FILE=initdb.sh

ENV OTUS_USER="otus"
ENV OTUS_PASS="otus"
ENV DOMAIN_USER="domain"
ENV DOMAIN_PASS="domain"
ENV ROOT_USER="admin"
ENV ROOT_PASS="admin"
ENV MONGO_INITDB_DATABASE=admin
ENV MONGO_INITDB_ROOT_USERNAME=${ROOT_USER}
ENV MONGO_INITDB_ROOT_PASSWORD=${ROOT_PASS}

USER root

COPY initdb /initdb
COPY ${INITDB_FILE} /docker-entrypoint-initdb.d/

EXPOSE 27017
